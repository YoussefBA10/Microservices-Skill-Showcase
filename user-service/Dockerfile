FROM openjdk:17-jdk-alpine AS build

ENV MYSQL_HOST=mysqldb
ENV MYSQL_PORT=3306
ENV MYSQL_USERNAME=root
ENV MYSQL_PASSWORD=786919
ENV BACKEND_MAILER_URL_HOST=localhost
ENV BACKEND_MAILER_URL_PORT=8082
ENV FRONTEND_ACTIVATION_URL_HOST=localhost
ENV FRONTEND_ACTIVATION_URL_PORT=80
ENV JWT_SECRET_KEY=eyJhbGciOiJIUzI1NiJ9eyJSb2xlIjoiQWRtaW4iLCJJc3N1ZXIiOiJJc3N1ZXIiLCJVc2VybmFtZSI6IkphdmFJblVzZSIsImV4cCI6MTcyNzQzOTg5NiwiaWF0IjoxNzI3NDM5ODk2fQw8WJR8e2efdua9k3CTMDkijVuLoTdMSgHRM3DleeiPo
ENV SERVER_PORT=8081
WORKDIR /app

COPY target/Security-0.0.1-SNAPSHOT.jar /app/

ENTRYPOINT exec java -Dserver.port=$SERVER_PORT -jar /app/Security-0.0.1-SNAPSHOT.jar

EXPOSE 8081

